



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://asit-dhal.github.io/golang/golang-slice-and-append/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Golang slice and append</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-58305706-1", "asit-dhal.github.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#golang-slice-and-append" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://asit-dhal.github.io/" title="Asit Dhal's Personal Blog" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Asit Dhal's Personal Blog
            </span>
            <span class="md-header-nav__topic">
              
                Golang slice and append
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://asit-dhal.github.io/" title="Asit Dhal's Personal Blog" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Asit Dhal's Personal Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Git
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/delete-old-branches-in-git/" title="Delete old branches in Git" class="md-nav__link">
      Delete old branches in Git
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Juce
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Juce
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../juce/broadcasters-and-listeners-in-juce/" title="Broadcasters and listeners in JUCE" class="md-nav__link">
      Broadcasters and listeners in JUCE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../juce/side-panel-in-juce/" title="Side Panel in JUCE" class="md-nav__link">
      Side Panel in JUCE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      C++
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        C++
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cpp/string-conversion-benchmark/" title="string conversion benchmark in C++" class="md-nav__link">
      string conversion benchmark in C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cpp/range-generator-algorithms/" title="Range Generator Algorithms" class="md-nav__link">
      Range Generator Algorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cpp/property-check-agorithims/" title="Property Check Algorithms" class="md-nav__link">
      Property Check Algorithms
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      CMake
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        CMake
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cmake/functions-and-macros/" title="Cmake Functions and Macros" class="md-nav__link">
      Cmake Functions and Macros
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Golang
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Golang
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../golang-templates-1-introduction/" title="Golang Templates-1 Introduction" class="md-nav__link">
      Golang Templates-1 Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../golang-templates-2-template-composition-and-how-to-organize-template-files/" title="Golang Template-2 Template composition" class="md-nav__link">
      Golang Template-2 Template composition
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Golang slice and append
      </label>
    
    <a href="./" title="Golang slice and append" class="md-nav__link md-nav__link--active">
      Golang slice and append
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reslicing" title="Reslicing" class="md-nav__link">
    Reslicing
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../archives/" title="Archives" class="md-nav__link">
      Archives
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reslicing" title="Reslicing" class="md-nav__link">
    Reslicing
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="golang-slice-and-append">Golang slice and append<a class="headerlink" href="#golang-slice-and-append" title="Permanent link">&para;</a></h1>
<p>In Golang, a slice is a reference to a contiguous segment of an array. Slice is basically a pointer, with additional properties about the array.</p>
<p>A slice is a structure of 3 fields.</p>
<ul>
<li>a pointer to the underlying array</li>
<li>length of the slice</li>
<li>capacity of the slice</li>
</ul>
<p>You can see this in slice.go, here <a href="https://github.com/golang/go/blob/master/src/runtime/slice.go">https://github.com/golang/go/blob/master/src/runtime/slice.go</a></p>
<div class="codehilite"><pre><span></span>// slice1.go
package main

import (
    &quot;fmt&quot;
)

func main() {
    var arr1 = [5]int { 10, 20, 30, 40, 50}
    var slice1 []int = arr1[1:3]
    var slice2 []int = arr1[2:]
    fmt.Printf(&quot;array: %v len: %d\n&quot;, arr1, len(arr1))
    fmt.Printf(&quot;slice1: %v len: %d cap: %d\n&quot;, slice1, len(slice1), cap(slice1))
    fmt.Printf(&quot;slice2: %v len: %d cap: %d\n&quot;, slice2, len(slice2), cap(slice2))

    arr1[2] = 35
    fmt.Printf(&quot;array: %v len: %d\n&quot;, arr1, len(arr1))
    fmt.Printf(&quot;slice1: %v len: %d cap: %d\n&quot;, slice1, len(slice1), cap(slice1))
    fmt.Printf(&quot;slice2: %v len: %d cap: %d\n&quot;, slice2, len(slice2), cap(slice2))
}
</pre></div>


<p>Output</p>
<div class="codehilite"><pre><span></span>array: [10 20 30 40 50] len: 5
slice1: [20 30] len: 2 cap: 4
slice2: [30 40 50] len: 3 cap: 3
array: [10 20 35 40 50] len: 5
slice1: [20 35] len: 2 cap: 4
slice2: [35 40 50] len: 3 cap: 3
</pre></div>


<p>Both the slices point to the same memory, any changes to the actual data will impact all the slices pointing to the array. So, if you have an array and many slices pointing to the same array, there can be many places where the array can be changed. So, this is a disaster going to happen.</p>
<p><img alt="slice-append" src="../images/slice-append.png" /></p>
<blockquote>
<p>You should avoid exposing the array and always keep it anonymous.</p>
</blockquote>
<p>Golang provides make() to achieve this objective. make() allows us to create a slice when the underlying array is not defined.</p>
<div class="codehilite"><pre><span></span>slice1 := make([]type, len) //case 1
slice2 := make([]type, len, cap) // case 2
</pre></div>


<p>In the first case, the slice is pointing to an array of length ‘len’.</p>
<p>Here, the following statement is true</p>
<div class="codehilite"><pre><span></span>cap(slice1) = len(slice1) = len 
</pre></div>


<p>In the second case, slice2 doesn’t occupy the entire underlying array. The array has a length ‘cap’ and slice has length ‘len’. There is space for reslicing.</p>
<h2 id="reslicing">Reslicing<a class="headerlink" href="#reslicing" title="Permanent link">&para;</a></h2>
<p>Changing the length of the slice is called reslicing. It is done by increasing the end index of the slice, until it occupies the entire array.</p>
<p>Increase the slice length by 1</p>
<div class="codehilite"><pre><span></span>s = s[0:len(s)+1]
</pre></div>


<blockquote>
<p>Slice length can be reached upto the capacity. If the length crosses the capacity, it will panic at run time.</p>
</blockquote>
<p>The capacity is a limitation in reslicing. So, golang provides an built-in function append() to fix this issue.</p>
<p>The built-in append() does the following</p>
<ul>
<li><code>append()</code> appends zero or more values to a slice and returns the resulting slice.</li>
<li>allocates a new, sufficiently large slice</li>
<li>always succeeds, unless the computer runs out of memory</li>
</ul>
<blockquote>
<p>append() may either modify its argument in-place or return a copy of its argument with an additional entry, depending on the size and capacity of its input. append() function creates a new slice, if the length the slice is greater than the length of the array pointed by the slice.</p>
</blockquote>
<div class="codehilite"><pre><span></span>// append.go
package main

import (
    &quot;fmt&quot;
)

func main() {
    var arr1 = [5]int { 10, 20, 30, 40, 50}
    var slice1 []int = arr1[1:4]
    fmt.Printf(&quot;array: %v\n&quot;, arr1)
    fmt.Printf(&quot;slice1: %v\n&quot;, slice1)

    //modify the underlying array
    slice1 = append(slice1, 56)
    fmt.Printf(&quot;array: %v\n&quot;, arr1)
    fmt.Printf(&quot;slice1: %v\n&quot;, slice1)

    //creates a new array and returns slice pointing to it
    slice1 = append(slice1, 69)
    fmt.Printf(&quot;array: %v\n&quot;, arr1)
    fmt.Printf(&quot;slice1: %v\n&quot;, slice1)

}
</pre></div>


<p>Output</p>
<div class="codehilite"><pre><span></span>array: [10 20 30 40 50]
slice1: [20 30 40]
array: [10 20 30 40 56]
slice1: [20 30 40 56]
array: [10 20 30 40 56]
slice1: [20 30 40 56 69]
</pre></div>


<p>In the first append(), the argument is modified and in the 2nd append(), a new slice is created.</p>
                
                  
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://asit-dhal.github.io/golang/golang-slice-and-append/";
      this.page.identifier =
        "golang/golang-slice-and-append/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//asit-dhal.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../golang-templates-2-template-composition-and-how-to-organize-template-files/" title="Golang Template-2 Template composition" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Golang Template-2 Template composition
              </span>
            </div>
          </a>
        
        
          <a href="../../archives/" title="Archives" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Archives
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017-2019 Asit Dhal
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/asit-dhal" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>